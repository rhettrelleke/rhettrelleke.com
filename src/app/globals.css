@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --color-background: #faf9f7; /* off-white */
  --color-foreground: #0f172a; /* slate-900 */
  --color-accent: #3b82f6; /* blue-500 */
  --color-accent-2: #8b5cf6; /* violet-500 */
  --color-muted: #475569; /* slate-600 for subtext */
  --color-border: #e5e7eb; /* gray-200 */
}

/* Dark theme variables */
.dark {
  --color-background: #0f1115; /* soft near-black */
  --color-foreground: #e5e7eb; /* gray-200 text */
  --color-accent: #60a5fa; /* blue-400 */
  --color-accent-2: #a78bfa; /* violet-400 */
  --color-muted: #cbd5e1; /* slate-300 for higher contrast */
  --color-border: #23262d; /* soft gray border */
}

html, body, #__next {
  height: 100%;
}

body {
  @apply bg-background text-foreground antialiased;
}

.prose pre code {
  display: grid;
}

.prose code {
  @apply rounded px-1 py-0.5 text-[0.95em];
  background-color: color-mix(in oklab, var(--color-foreground) 6%, transparent);
}

.prose pre {
  @apply rounded-lg border p-4;
  border-color: var(--color-border);
  background-color: color-mix(in oklab, var(--color-background) 85%, var(--color-foreground) 1%);
}

/* Better dark-mode paragraph contrast in posts */
.prose p {
  color: color-mix(in oklab, var(--color-foreground) 92%, var(--color-background) 8%);
}
.dark .prose p {
  color: color-mix(in oklab, var(--color-foreground) 96%, var(--color-background) 4%);
}

/* Improve list readability */
.prose ul>li, .prose ol>li {
  color: color-mix(in oklab, var(--color-foreground) 92%, var(--color-background) 8%);
}
.dark .prose ul>li, .dark .prose ol>li {
  color: color-mix(in oklab, var(--color-foreground) 96%, var(--color-background) 4%);
}
.prose ul>li::marker {
  color: color-mix(in oklab, var(--color-accent) 90%, var(--color-foreground) 10%);
}
.dark .prose ul>li::marker {
  color: color-mix(in oklab, var(--color-accent-2) 85%, var(--color-accent) 15%);
}
.prose ul, .prose ol {
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
}
.prose li+li {
  margin-top: 0.35rem;
}

.container-page {
  @apply mx-auto max-w-4xl px-4 md:px-6;
}

.section {
  @apply py-12 md:py-16;
}

/* Center only the homepage hero (not blog posts) */
@media (min-width: 768px) {
  .hero h1,
  .hero p,
  .hero .cta {
    margin-left: auto;
    margin-right: auto;
    text-align: center;
  }
}

/* Hide scrollbar for nav overflow */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* Mobile-only navbar helpers (iPhone mini safe-area + scroll) */
@media (max-width: 390px) {
  .safe-pad {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
  .nav-scroll {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* Animated accent outline chip for headings */
.accent-outline { position: relative; display: inline-block; padding: 0.18rem 0.6rem; border-radius: 0.5rem; }
.accent-outline::before { content: ""; position: absolute; inset: 0; border-radius: inherit; padding: 2px; background: linear-gradient(90deg, var(--color-accent), var(--color-accent-2), var(--color-accent)); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; animation: outline-shift 3.5s linear infinite; opacity: 0.95; filter: drop-shadow(0 0 6px color-mix(in oklab, var(--color-accent) 50%, transparent)); }
@keyframes outline-shift { 0% { background-position: 0% 50%; } 100% { background-position: 250% 50%; } }

/* Loading dots */
.dots { display: inline-flex; gap: 3px; margin-left: 6px; vertical-align: middle; }
.dots span { width: 6px; height: 6px; border-radius: 50%; background: var(--color-accent-2); opacity: 0.3; animation: dots-blink 1s infinite ease-in-out; }
.dots span:nth-child(2) { animation-delay: .2s; }
.dots span:nth-child(3) { animation-delay: .4s; }
@keyframes dots-blink { 0%, 80%, 100% { opacity: 0.25 } 40% { opacity: 1 } }

.muted {
  color: var(--color-muted);
}

/* Accent utilities */
.accent-gradient {
  background-image: linear-gradient(90deg, var(--color-accent) 0%, var(--color-accent-2) 100%);
}

/* Link accent underline */
a.link-accent {
  position: relative;
}
a.link-accent::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -2px;
  width: 100%;
  height: 2px;
  background-image: linear-gradient(90deg, var(--color-accent), var(--color-accent-2));
  opacity: 0.4;
  transition: opacity 150ms ease;
}
a.link-accent:hover::after {
  opacity: 1;
}

/* Heading gradient accent */
.heading-accent {
  background-image: linear-gradient(90deg, var(--color-accent), var(--color-accent-2));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

/* Hover gradient text utility */
.hover-gradient-text {
  transition: color 150ms ease;
}
.hover-gradient-text:hover {
  background-image: linear-gradient(90deg, var(--color-accent), var(--color-accent-2));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

/* In-article link accents (MDX prose) */
.prose :where(p a, li a) {
  position: relative;
  text-decoration: none;
}
.prose :where(p a, li a)::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -2px;
  width: 100%;
  height: 2px;
  background-image: linear-gradient(90deg, var(--color-accent), var(--color-accent-2));
  opacity: 0.4;
  transition: opacity 150ms ease;
}
.prose :where(p a, li a):hover::after {
  opacity: 1;
}


